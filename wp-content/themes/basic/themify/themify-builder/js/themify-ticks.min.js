var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(c.call(b,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6-impl","es3");var TB_Ticks;
(function(a){TB_Ticks={interval:null,time:2E4,$el:null,options:null,request:null,iframe:null,init:function(c,b){var d=TB_Ticks;d.options=c;d.time=1E3*parseInt(c.tick/2);d.$el=a("#tmpl-builder-restriction");d.iframe=b;return d},ticks:function(){function c(d){if(d&&1!==Number(d)){b.request.abort();clearInterval(b.interval);document.body.insertAdjacentHTML("beforeend",d);b.$el=a("#tmpl-builder-restriction");b.show();b.iframe.ThemifyBuilderCommon.showLoader("show");var c=b.iframe.themifybuilderapp;c.Utils.saveBuilder(function(){c.Views.Toolbar.prototype.Revisions.ajax({action:"tb_save_revision",
rev_comment:b.$el.find(".tb-locked-revision").text()},function(){b.iframe.ThemifyBuilderCommon.showLoader("hide");c.Models.Registry.destroy()})},"main",0,!0)}}var b=TB_Ticks;null!==b.interval&&clearInterval(b.interval);b.interval=setInterval(function(){b.ajax(c,null)},b.time);a(document).off("heartbeat-tick",c).on("heartbeat-tick",function e(c,g){"undefined"!==typeof g["wp-refresh-post-lock"].lock_error&&(b.request.abort(),clearInterval(b.interval),a(document).off("heartbeat-tick",e))});return b},
ajax:function(c,b){var d=TB_Ticks;d.request=a.ajax({type:"POST",url:d.options.ajaxurl,data:{action:"tb_update_tick",postID:d.options.postID,take:b},success:c})},isEditing:function(){return document.body.classList.contains("tb-restriction")},show:function(){var a=TB_Ticks;a.$el.show();a.close();a.takeOver()},hide:function(){TB_Ticks.$el.hide()},takeOver:function(){var c=TB_Ticks;a("body").one("click",".tb-locked-btn",function(b){b.preventDefault();b.stopPropagation();c.ajax(function(){var b=a("body");
b.hasClass("themify_builder_active")||b.hasClass("wp-admin")?c.ticks():(b.removeClass("tb-restriction"),a(".js-turn-on-builder").first().trigger("click"));c.$el.remove()},1)})},close:function(){a(".tb-locked-close").one("click",this.hide)}};a(document).ready(function(){})})(jQuery);
