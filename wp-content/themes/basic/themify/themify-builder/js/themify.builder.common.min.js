var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,k,h){c instanceof String&&(c=String(c));for(var l=c.length,a=0;a<l;a++){var b=c[a];if(k.call(h,b,a,c))return{i:a,v:b}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,k,h){c!=Array.prototype&&c!=Object.prototype&&(c[k]=h.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,k,h,l){if(k){h=$jscomp.global;c=c.split(".");for(l=0;l<c.length-1;l++){var a=c[l];a in h||(h[a]={});h=h[a]}c=c[c.length-1];l=h[c];k=k(l);k!=l&&null!=k&&$jscomp.defineProperty(h,c,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,h){return $jscomp.findInternal(this,c,h).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var k=0;return $jscomp.iteratorPrototype(function(){return k<c.length?{done:!1,value:c[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.iteratorFromArray=function(c,k){$jscomp.initSymbolIterator();c instanceof String&&(c+="");var h=0,l={next:function(){if(h<c.length){var a=h++;return{value:k(a,c[a]),done:!1}}l.next=function(){return{done:!0,value:void 0}};return l.next()}};l[Symbol.iterator]=function(){return l};return l};
$jscomp.polyfill("Array.prototype.keys",function(c){return c?c:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6-impl","es3");var ThemifyBuilderCommon;
window.top.document!==document?(window.wp.media=window.top.wp.media,MediaElementPlayer=window.top.MediaElementPlayer,jQuery.fn.mediaelementplayer=window.top.jQuery(window.top.document).mediaelementplayer,jQuery.ui=window.top.jQuery.ui,jQuery.fn.sortable=window.top.jQuery(window.top.document).sortable,window.wp.mediaelement=window.top.wp.mediaelement,window.tinyMCE=window.top.tinyMCE,window.tinyMCEPreInit=window.top.tinyMCEPreInit,window.tinymce=window.top.tinymce,window.switchEditors=window.top.switchEditors,
top_iframe=window.top.document,void 0===window.self.wp&&(window.self.wp=window.top.wp),void 0===window.self._&&(window.self._=window.top._)):top_iframe=document;
(function(c,k,h,l){ThemifyBuilderCommon={fonts:[],safe_fonts:{},google_fonts:{},loaded_fonts:[],showLoader:function(a){var b=c("#themify_builder_alert",top_iframe);"show"===a?b.addClass("tb_busy").show():"spinhide"===a?b.fadeOut(500,function(){c(this).removeClass("tb_busy")}):("error"!==a&&(a="done"),b.removeClass("tb_busy").addClass("tb_"+a).delay(500).fadeOut(500,function(){c(this).removeClass("tb_"+a)}))},Clipboard:{key:"themify_builder_clipboard_",is_available:null,storageAvailable:function(a){if(null===
this.is_available)try{var b=k[a];b.setItem("__storage_test__","__storage_test__");b.removeItem("__storage_test__");this.is_available=!0}catch(d){this.is_available=!1,alert(themifyBuilder.i18n.text_no_localStorage)}return this.is_available},set:function(a,b){if(this.storageAvailable("localStorage")){var c={};c[a]=b;localStorage.setItem(this.key+"content",JSON.stringify(c));return!0}return!1},get:function(a){if(this.storageAvailable("localStorage")){var b=JSON.parse(localStorage.getItem(this.key+"content"));
return b[a]!==l?b[a]:!1}return!1}},confirmDataPaste:function(){return confirm(themifyBuilder.i18n.text_confirm_data_paste)},alertWrongPaste:function(){alert(themifyBuilder.i18n.text_alert_wrong_paste)},detectBuilderComponent:function(a){return a.data("component")||a.attr("data-component")||!1},getCheckedRadioInGroup:function(a,b){"undefined"===typeof b&&(b=null);var d=a.attr("name");return c('input:radio[name="'+d+'"]:checked',b)},loadGoogleFonts:function(a,b){b=b||!1;var c={google:{families:a}};
WebFont.load(c);b&&(c.context=b,WebFont.load(c))},autoComplete:function(a){var b=c(".themify_tax_autocomplete",a);if(0<b.length){var d=[];b.each(function(){var a=c(this),b=a.closest(".themify_builder_input").find("input.query_category_multiple"),k=b.val();c(this).autocomplete({minLength:2,source:function(b,d){var e=c.trim(b.term);c.getJSON(themifyBuilder.ajaxurl,{term:c.trim(e),tax:a.data("tax"),action:a.data("action")},function(a,b,c){d(a)})},select:function(a,c){b.val(c.item.value);this.value=c.item.label;
return!1}}).focus(function(){c(this).autocomplete("search");return!1});if(k&&"undefined"!==k){var f={};f[a.data("tax")]=k;d.push(f)}else b.val("")});0<d.length&&c.ajax({url:themifyBuilder.ajaxurl,type:"POST",dataType:"json",data:{data:d,action:"themify_builder_get_tax_data"},success:function(b){if(b)for(var d in b)c("#themify_search_cat_"+b[d].tax,a).val(b[d].val)}})}},fontPreview:function(a){function b(a){var b=a.comboSelect({comboClass:"themify-combo-select",comboArrowClass:"themify-combo-arrow",
comboDropDownClass:"themify-combo-dropdown",inputClass:"themify-combo-input",disabledClass:"themify-combo-disabled",hoverClass:"themify-combo-hover",selectedClass:"themify-combo-selected",markerClass:"themify-combo-marker"}).parent("div");b.on("comboselect:close",function(){c(".themify_builder_font_preview",top_iframe).hide()}).on("click.item",".themify-combo-item",function(b){var d=c(this).data("value");d&&-1===c.inArray(d,e.loaded_fonts)&&"webfont"!==a.find('option[value="'+d+'"]').data("type")&&
WebFont.load({classes:!1,google:{families:[d]},fontloading:function(a,b){e.loaded_fonts.push(d)},fontinactive:function(a,b){e.loaded_fonts.push(d)}})}).trigger("focusin");c(".themify-combo-item",b).unbind("hover").hover(function(){var f=c(this).data("value");if(f&&c(this).is(":visible")){var g=b.next(".themify_builder_font_preview");"default"===f&&(f="inherit");g.css({top:c(this).position().top+30,"font-family":f,display:"block"});if("inherit"!==f&&!c(this).hasClass("themify_builder_font_loaded")){var h=
c(this),m=h.index();h.addClass("themify_builder_font_loaded");g=g.children("span");-1===c.inArray(f,e.fonts)&&(g.addClass("themify_show_wait"),"webfont"!==a.find('option[value="'+f+'"]').data("type")?WebFont.load({classes:!1,context:k.top,google:{families:[f]},fontloading:function(a,b){e.fonts.push(f);g.removeClass("themify_show_wait")},fontinactive:function(a,b){e.fonts.push(f);g.removeClass("themify_show_wait")}}):(e.fonts.push(f),g.removeClass("themify_show_wait")));d(m,f,g)}}})}function d(a,b){c(".themify-combo-dropdown",
top_iframe).find("li:eq("+a+")").addClass("themify_builder_font_loaded").css("font-family",b)}var e=ThemifyBuilderCommon;setTimeout(function(){e.autoComplete(a)},100);var g="",h="";if(0===Object.keys(e.safe_fonts).length){for(var f=themifyBuilder.fonts.safe,m=0,l=f.length;m<l;++m)""!==f[m].value&&"default"!==f[m].value&&(e.safe_fonts[f[m].value]=f[m].name);f=themifyBuilder.fonts.google;m=0;for(l=f.length;m<l;++m)""!==f[m].value&&"default"!==f[m].value&&(e.google_fonts[f[m].value]=f[m].name);delete themifyBuilder.fonts}a.find(".font-family-select").each(function(){var a=
c(this).data("selected"),d=c(this).find("optgroup");c(this).parent(".themify_builder_font_preview_wrapper").one("focusin",function(){if(!g){for(var f in e.safe_fonts){var k=a===f?'selected="selected"':"";g+="<option "+k+' data-type="webfont" value="'+f+'">'+e.safe_fonts[f]+"</option>"}for(f in e.google_fonts)k=a===f?'selected="selected"':"",h+="<option "+k+' value="'+f+'">'+e.google_fonts[f]+"</option>"}d[0].insertAdjacentHTML("beforeend",g);d.last()[0].insertAdjacentHTML("beforeend",h);b(c(this).children("select"));
themifybuilderapp.hasChanged=!0});a&&(e.safe_fonts[a]?d[0].insertAdjacentHTML("beforeend",'<option selected="selected" data-type="webfont" value="'+a+'">'+e.safe_fonts[a]+"</option>"):e.google_fonts[a]&&d.last()[0].insertAdjacentHTML("beforeend",'<option selected="selected" value="'+a+'">'+e.google_fonts[a]+"</option>"))});if(0<e.fonts.length){var f=c(".themify-combo-dropdown").first(),n;for(n in e.fonts)m=f.find('[data-value="'+e.fonts[n]+'"]').index(),d(m,e.fonts[n])}c(".themify-combo-arrow",top_iframe).unbind("click").click(function(){c(".themify_builder_font_preview",
top_iframe).hide()})},Lightbox:{$lightbox:null,rememberedRow:null,rememberedCid:null,setup:function(){var a="true"===themifyBuilder.isThemifyTheme?"is-themify-theme":"is-not-themify-theme",a=wp.template("builder_lightbox")({is_themify_theme:a});top_iframe.body.insertAdjacentHTML("beforeend",a);this.$lightbox=c("#themify_builder_lightbox_parent",top_iframe);this.bindEvents()},bindEvents:function(){var a=ThemifyBuilderCommon.Lightbox,b="true"===themifyBuilder.isTouch?"touchend":"click";SimpleBar.removeObserver();
a.$lightbox.on(b,".themify_builder_options_tab li,.themify_builder_tabs>ul li",a.switchTabs).on(b,".builder_cancel_lightbox",a.cancel).on(b,".reset-styling",a.resetStyling).on("change",".tb-option-radio-enable input",a.clickRadioOption).on("change",".tb-option-checkbox-enable input",a.clickCheckboxOption).on("change",".border_style",a.hideShowBorder).on(b,".tb-icon-radio label",a.bindStylingToggles).on(b,".tb-style-toggle",a.bindStylingRows).one("themify_opened_lightbox",a.resizable.init.bind(a.resizable));
themifyBuilder.disableShortcuts||a.controlByKeyInput();if("visual"===themifybuilderapp.mode)a.$lightbox.on(b,".builder_cancel_docked_mode",function(b){b.preventDefault();b.stopPropagation();a.dockMode.close(!0);c(h).trigger("mouseup")})},adjustHeight:function(a){this.$lightbox.find("#themify_builder_lightbox_container").css("height",a-55)},getLightboxStorageKey:function(){return"visual"===themifybuilderapp.mode?"themify_builder_lightbox_frontend_pos_size":"themify_builder_lightbox_backend_pos_size"},
getLightboxStorage:function(){var a=localStorage.getItem(this.getLightboxStorageKey())||"{}";return JSON.parse(a)},updateLightboxStorage:function(a){var b=this.getLightboxStorage(),c;(c=_.extend(b,a))&&localStorage.setItem(this.getLightboxStorageKey(),JSON.stringify(c))},resizable:{$el:"",w:"",h:"",x:"",y:"",axis:"",overlay:!1,minWidth:500,maxWidth:880,minHeight:320,maxHeight:800,init:function(){var a=this,b=ThemifyBuilderCommon.Lightbox,d=c("body",top_iframe),e=function(e,g){if(g!==l&&e&&e.target.classList.contains("builder-lightbox"))switch(e.type){case "dragstart":d.addClass("themify_lightbox_drag");
b.fixContainment();break;case "dragstop":d.removeClass("themify_lightbox_drag"),b.fixContainment(),"visual"===themifybuilderapp.mode&&c(h).trigger("mouseup"),a.remember();case "drag":b.dockMode.drag(e)}};this.$el=b.$lightbox;a.$el.draggable({handle:a.$el.find(".themify_builder_lightbox_top_bar"),scroll:!1,start:e,drag:e,stop:e});"visual"===themifybuilderapp.mode&&(this.tb_resizable_overlay=this.$el.prev(".tb_resizable_overlay"));for(var e=this.$el[0].getElementsByClassName("tb_resizable"),g=0,k=e.length;g<
k;++g)e[g].addEventListener("mousedown",function(b){1===b.which&&(b.preventDefault(),a.x=b.clientX,a.y=b.clientY,a.w=parseInt(a.$el.outerWidth(),10),a.h=parseInt(a.$el.outerHeight(),10),a.axis=this.classList.contains("tb_resizable-se")?"both":this.classList.contains("tb_resizable-s")?"y":this.classList.contains("tb_resizable-w")?"w":"x",a.tb_resizable_overlay&&a.tb_resizable_overlay.show(),a.$el.addClass("tb_resizing"),top_iframe.addEventListener("mousemove",a.resize,!1),top_iframe.addEventListener("mouseup",
a.stop,!1),"w"===a.axis&&(d.addClass("tb_start_animate"),c("body").addClass("tb_start_animate")))},!1);c("body").on("editing_module_option",a.setupLightboxSizeClass)},remember:function(){var a=ThemifyBuilderCommon.Lightbox.resizable,b=a.$el.position(),c=ThemifyBuilderCommon.Lightbox.dockMode.get(),e=ThemifyBuilderCommon.Lightbox.getLightboxStorage(),b={top:b.top,left:b.left,width:c&&e?e.width:a.$el.outerWidth(),height:c&&e?e.height:a.$el.outerHeight()};c&&(b.dockedWidth=a.$el.outerWidth());ThemifyBuilderCommon.Lightbox.updateLightboxStorage(b)},
setupLightboxSizeClass:function(){var a=ThemifyBuilderCommon.Lightbox.resizable;a.$el.toggleClass("larger-lightbox",750<parseInt(a.$el.width()))},resize:function(a){var b=ThemifyBuilderCommon.Lightbox.resizable,c=b.w+a.clientX-b.x,e=b.h+a.clientY-b.y;"w"===b.axis?(c=b.x+b.w-a.clientX,300<=c&&c<=b.maxWidth&&(b.$el.width(c),b.setupLightboxSizeClass(),ThemifyBuilderCommon.Lightbox.dockMode.resize(a))):(("both"===b.axis||"x"===b.axis)&&c>=b.minWidth&&c<=b.maxWidth&&(b.$el.width(c),b.setupLightboxSizeClass()),
("both"===b.axis||"y"===b.axis)&&e>=b.minHeight&&e<=b.maxHeight&&(b.$el.height(e),ThemifyBuilderCommon.Lightbox.adjustHeight(b.$el.height())))},stop:function(a){a=ThemifyBuilderCommon.Lightbox;var b=a.resizable;b.tb_resizable_overlay&&b.tb_resizable_overlay.hide();b.$el.removeClass("tb_resizing");top_iframe.removeEventListener("mousemove",b.resize,!1);top_iframe.removeEventListener("mouseup",b.stop,!1);a.fixContainment();b.remember();a.dockMode.resize("stop");c("body").trigger("themify_builder_lightbox_resize");
"w"===b.axis&&(a=c("body",top_iframe),a=a.add("body"),a.removeClass("tb_start_animate"))}},fixContainment:function(){var a=ThemifyBuilderCommon.Lightbox,b=a.$lightbox.outerWidth(),d=c(k.top).width(),e=c(k.top).height(),b=[-b+20,0,d-20,e-30],d=a.$lightbox.position(),e={};d.left<b[0]&&(e.left=b[0]);0>d.top&&(e.top=0);d.left>b[2]&&(e.left=b[2]);d.top>b[3]&&(e.top=b[3]);a.$lightbox.css(e)},open:function(a,b,d){var e=ThemifyBuilderCommon.Lightbox,g=c("#themify_builder_lightbox_container",e.$lightbox);
c("#themify_builder_overlay").show();ThemifyBuilderCommon.showLoader("show");"inline"===a.loadMethod?(a=ThemifyBuilderCommon.templateCache.get("tmpl-"+a.templateID),e.openCallback(a,g,b,d)):"html"===a.loadMethod?e.openCallback(a.data,g,b,d):(a.data=_.extend(a.data||{},{nonce:themifyBuilder.tb_load_nonce}),a=_.defaults(a||{},{type:"POST",url:themifyBuilder.ajaxurl}),c.ajax(a).done(function(a){e.openCallback(a,g,b,d);a=c(g).find(".themify_builder_options_tab_wrapper");0<a.length&&new SimpleBar(a[0])}))},
openCallback:function(a,b,d,e){themifybuilderapp.toolbar.undoManager.disable();var g=ThemifyBuilderCommon.Lightbox,l={top:100,left:Math.max(0,c(k.top).width()/2-300),width:600,height:500};_.extend(l,g.getLightboxStorage());a=c(a);var f=a.find("#themify_builder_lightbox_options_tab_items");0<f.length&&(g.$lightbox[0].getElementsByClassName("themify_builder_options_tab")[0].innerHTML=f[0].innerHTML,f.remove());f=a.find("#themify_builder_lightbox_actions_items");0<f.length?(g.$lightbox[0].getElementsByClassName("tb_lightbox_actions_wrap")[0].innerHTML=
f[0].innerHTML,f.remove()):g.$lightbox[0].getElementsByClassName("tb_lightbox_actions_wrap")[0].innerHTML="";"function"===typeof d&&d.call(g,a[0]);b.html(a[0]);"function"===typeof e&&e.call(g,a[0]);g.$lightbox.addClass("themify_builder_show_start").show().css(l);g.dockMode.setDoc();g.fixContainment();ThemifyBuilderCommon.showLoader("spinhide");if(!themifyBuilder.disableShortcuts)c(h).off("keyup",g.cancelKeyListener).on("keyup",g.cancelKeyListener);g.adjustHeight(l.height);g.$lightbox.removeClass("themify_builder_show_start").trigger("themify_opened_lightbox")},
close:function(a){function b(){a||(d._cleanLightBoxContent(),c(this).removeClass("animated fadeOut"),c("#themify_builder_lightbox_parent",top_iframe).hide());themifybuilderapp.activeModel&&(themifybuilderapp.activeModel.unset("styleClicked",{silent:!0}),themifybuilderapp.activeModel.unset("visibileClicked",{silent:!0}));a||themifybuilderapp.toolbar.undoManager.updateUndoBtns();c("body").trigger("themify_builder_lightbox_close");"visual"===themifybuilderapp.mode&&k.top.jQuery("body").trigger("themify_builder_lightbox_close");
a||(d.dockMode.close(!1,!0),themifybuilderapp.autoSaveCid=null)}var d=ThemifyBuilderCommon.Lightbox;a?b():(c("body").trigger("themify_builder_lightbox_before_close"),d.$lightbox.fadeOut(b))},dockMode:{key:"themify_builder_docked",workspace:c(".themify_builder_workspace_container",top_iframe.body),isDocked:null,defaultWidth:380,dockOut:0,checkIsVisual:function(){return"visual"===themifybuilderapp.mode},set:function(a,b){!b&&localStorage.setItem(this.key,a);this.isDocked=a},get:function(){return this.isDocked||
"true"===localStorage.getItem(this.key)},setStyleRowToggle:function(){var a=ThemifyBuilderCommon.Lightbox,b=a.$lightbox.find(".themify_builder_tab");0<b.length?b.each(function(){var a=c(this).find(".tb-style-toggle");1<a.length&&(a.addClass("tb-closed"),c(this).find(".themify_builder_field").addClass("tb-field-expanded"))}):(b=a.$lightbox.find(".tb-style-toggle"),a=a.$lightbox.find("#themify_builder_options_styling .themify_builder_field"),a=a.filter(function(){return!c(this).find(".reset-styling, #custom_css_column, #custom_css_subrow").length}),
b.addClass("tb-closed"),a.addClass("tb-field-expanded"))},setDoc:function(){this.checkIsVisual()&&this.get()&&(top_iframe.body.classList.add("tb_module_panel_docked"),this.setDefaultWidth(),this.setWidth(),this.onResize(),c(k.top).off("tfsmartresize.docked").on("tfsmartresize.docked",function(){this.resize();this.onResize()}.bind(this)),c("body").off("themify_builder_change_mode.docked").on("themify_builder_change_mode.docked",function(a,b,c){this.setWidth();"desktop"!==c&&"desktop"===b&&setTimeout(function(){themifybuilderapp.toolbar.$el.width()!==
top_iframe.documentElement.clientWidth&&(this.setWidth(),this.onResize())}.bind(this),500)}.bind(this)));this.setStyleRowToggle()},setDefaultWidth:function(){var a=ThemifyBuilderCommon.Lightbox,b=a.getLightboxStorage(),c=this.defaultWidth;b&&b.dockedWidth&&(c=b.dockedWidth);a.$lightbox.css("width",c)},setWidth:function(){var a=(top_iframe.documentElement.clientWidth||top_iframe.body.clientWidth)-ThemifyBuilderCommon.Lightbox.$lightbox.css("height","").width();themifybuilderapp.toolbar.$el.css("width",
a);this.workspace.css("width",a);"tablet_landscape"===themifybuilderapp.activeBreakPoint&&themifybuilderapp.Utils.getBPWidth(themifybuilderapp.activeBreakPoint)-1>a&&this.workspace.find(".themify_builder_site_canvas_iframe").css("width",a)},resize:function(a){this.checkIsVisual()&&this.get()&&(this.setWidth(),"stop"===a&&this.onResize())},onResize:function(){themifybuilderapp.Utils._onResize(!0)},drag:function(a){this.checkIsVisual()&&((top_iframe.body.classList.toggle("themify-dock-highlight","drag"===
a.type&&a.pageX+20>=k.top.innerWidth),a.pageX+20>=k.top.innerWidth&&"dragstop"===a.type)?(this.set(!0),this.setDoc()):this.get()&&(this.dockOut?this.dockOut&&"dragstop"===a.type?this.dockOut=0:50<this.dockOut-a.clientX&&(this.close(),this.dockOut=0,c(h).trigger("mouseup")):this.dockOut=a.clientX))},close:function(a,b){if(this.checkIsVisual()&&this.get()){var d=ThemifyBuilderCommon.Lightbox,e=d.getLightboxStorage(),e={width:e.width?e.width:d.resizable.minWidth,height:e.height?e.height:d.resizable.minHeight};
a&&(e.top=k.top.innerHeight/2-d.$lightbox.innerHeight()/2,e.left=k.top.innerWidth/2-d.$lightbox.innerWidth()/2);d.$lightbox.css(e);this.set(!1,b);top_iframe.body.classList.remove("tb_module_panel_docked");themifybuilderapp.toolbar.$el.css("width","");this.workspace.css("width","");this.onResize();c(k.top).off("tfsmartresize.docked");c("body").off("themify_builder_change_mode.docked")}}},_cleanLightBoxContent:function(){this.forgetRow();this.$lightbox.find(".themify_builder_options_tab").empty();this.$lightbox.find(".tb_lightbox_actions_wrap").empty()},
controlByKeyInput:function(){function a(a){83!==a.which||"INPUT"===h.activeElement.tagName||"TEXTAREA"===h.activeElement.tagName||!0!==a.ctrlKey&&!0!==a.metaKey||(a.preventDefault(),a.stopPropagation(),a=c(".builder_save_button",top_iframe),0<a.length?a.trigger("click"):themifybuilderapp.toolbar.$el.find(".tb_toolbar_save").trigger("click"))}c(h).on("keydown",a);if("visual"===themifybuilderapp.mode)c(top_iframe).on("keydown",a)},clone:function(a){a=a.clone(!0);"visual"===themifybuilderapp.mode&&(a.find("video").trigger("pause"),
a.find(".big-video-wrap").remove());return a},rememberRow:function(){this.rememberedRow=this.clone(c(".tb_element_cid_"+themifybuilderapp.activeModel.cid));this.rememberedCid=themifybuilderapp.activeModel.cid},revertToRememberedRow:function(){var a=themifybuilderapp.Models.Registry.lookup(this.rememberedCid);if(a){var b=a.get("elType");"subrow"!==b&&"column"!==b&&a.trigger("custom:restorehtml",this.rememberedRow)}this.forgetRow()},forgetRow:function(){this.rememberedRow=this.rememberedCid=null},clickRadioOption:function(a,
b){b=b?b:c(this);var d=b.hasClass("themify-builder-radio-dnd")?b.closest(".tb_repeatable_field_content"):ThemifyBuilderCommon.Lightbox.$lightbox,e=ThemifyBuilderCommon.getCheckedRadioInGroup(b,d),g=d.find('input[name="'+e.prop("name")+'"]'),e=e.data("selected");g.each(function(){d.find(".tb-group-element-"+c(this).val()).hide()});c("."+e,d).show();d.find("[data-binding]:visible").each(function(){themifybuilderapp.Mixins.Common.doTheBinding(c(this),c(this).val())})},clickCheckboxOption:function(a,
b){b=b?b:c(this);var d=b.hasClass("themify-builder-radio-dnd")?b.closest(".tb_repeatable_field_content"):ThemifyBuilderCommon.Lightbox.$lightbox;d.find(".tb-checkbox-element").hide();var e=b.parent(".themify-checkbox");(e.hasClass("tb-option-checkbox-revert")?e.find("input:not(:checked)"):e.find("input:checked")).each(function(){d.find(".tb-checkbox-element."+c(this).data("selected")).show()})},bindStylingToggles:function(a){var b=c(this).prev("input");b.is(":checked")&&(a.stopPropagation(),a.preventDefault(),
b.prop("checked",!1).trigger("change"))},bindStylingRows:function(a){a.preventDefault();a=c(this).nextUntil(".tb-style-toggle");a=a.filter(function(){return!c(this).find(".reset-styling, #custom_css_column, #custom_css_subrow").length});this.classList.contains("tb-closed")?(this.classList.remove("tb-closed"),a.removeClass("tb-field-expanded")):(this.classList.add("tb-closed"),a.addClass("tb-field-expanded"))},hideShowBorder:function(a,b){if(!a||!a.isTrigger){b||(b=c(this));var d=b.closest(".selectwrapper").siblings(".tb_border_wrapper");
"none"===b.val()?d.css("display","none"):d.css("display","")}},cancelKeyListener:function(a){var b=ThemifyBuilderCommon.Lightbox;27===a.keyCode&&(a.preventDefault(),b.cancel(a))},cancel:function(a){a.preventDefault();a=ThemifyBuilderCommon.Lightbox;null!==a.rememberedCid&&a.revertToRememberedRow();a.close()},resetStyling:function(a){a.preventDefault();a.stopPropagation();a=c("#themify_builder_options_styling",top_iframe);for(var b=[],d=a[0].querySelectorAll(".tb_lb_option:not(.exclude-from-reset-field)"),
e=c("body"),g=0,k=d.length;g<k;++g){var f=d[g].classList,h=c(d[g]);f.contains("tb-radio-input-container")?(f=d[g].getAttribute("name"),-1===b.indexOf(f)&&a.find('[name="'+f+'"]').first().prop("checked",!0).trigger("change")):f.contains("themify-builder-uploader-input")?h.val("").trigger("change").parent().find(".img-placeholder").empty():f.contains("minicolors-input")?(h.val("").attr("data-opacity","").data("opacity","").parent(".minicolors").find(".minicolors-swatch-color").css({opacity:"",backgroundColor:""}),
"visual"===themifybuilderapp.mode?e.trigger("themify_builder_color_picker_change",[h.prop("id"),h,""]):h.trigger("change")):"SELECT"===d[g].tagName?(f.contains("font-family-select")?h.val("default"):f.contains("tb_unit")?h.val("px"):h.val("").prop("selected",!1),h.trigger("change")):h.val("").trigger("change")}},switchTabs:function(a){var b=ThemifyBuilderCommon.Lightbox;a.preventDefault();a.stopPropagation();a=c(this).find("a").attr("href");b=b.$lightbox.find(a);b[0]!==l&&(c(this).addClass("current").siblings().removeClass("current"),
b[0].SimpleBar===l&&0<c(this).closest(".themify_builder_options_tab").length&&new SimpleBar(b[0]),b.show().siblings(".themify_builder_options_tab_wrapper,.themify_builder_tab").hide(),c("body").trigger("themify_builder_tabsactive",[a,b]),"visual"===themifybuilderapp.mode&&c(h).trigger("mouseup"))}},LiteLightbox:{modal:new wp.media.view.Modal({controller:{trigger:function(){}}}),confirmView:Backbone.View.extend({template:wp.template("builder_lite_lightbox_confirm"),className:"themify_builder_lite_lightbox_content",
initialize:function(a){this.options=a||{}},render:function(){this.$el.html(this.template({message:this.options.message,buttons:this.options.buttons}))},events:{"click button":"buttonClick"},buttonClick:function(a){a.preventDefault();a=c(a.currentTarget).data("type");this.trigger("litelightbox:confirm",a)}}),promptView:Backbone.View.extend({template:wp.template("builder_lite_lightbox_prompt"),className:"themify_builder_lite_lightbox_content",initialize:function(a){this.options=a||{}},render:function(){this.$el.html(this.template(this.options))},
events:{"click button":"buttonClick","keypress .themify_builder_litelightbox_prompt_input":"keyPress"},buttonClick:function(a){a.preventDefault();a=c(a.currentTarget).data("type");var b=this.$el.find(".themify_builder_litelightbox_prompt_input").val();this.trigger("litelightbox:prompt",a,b)},keyPress:function(a){13===a.which&&(a=c(a.currentTarget).val(),this.trigger("litelightbox:prompt","ok",a))}}),confirm:function(a,b,d){d=_.defaults(d||{},{buttons:{no:{label:"No"},yes:{label:"Yes"}}});d.message=
a;a=new ThemifyBuilderCommon.LiteLightbox.confirmView(d);ThemifyBuilderCommon.LiteLightbox.modal.content(a);ThemifyBuilderCommon.LiteLightbox.modal.open();a.on("litelightbox:confirm",function(a){ThemifyBuilderCommon.LiteLightbox.modal.close();c.isFunction(b)&&b.call(this,a)})},prompt:function(a,b,d){d=_.defaults(d||{},{buttons:{cancel:{label:"Cancel"},ok:{label:"OK"}}});d.message=a;a=new ThemifyBuilderCommon.LiteLightbox.promptView(d);ThemifyBuilderCommon.LiteLightbox.modal.content(a);ThemifyBuilderCommon.LiteLightbox.modal.open();
a.on("litelightbox:prompt",function(a,d){ThemifyBuilderCommon.LiteLightbox.modal.close();c.isFunction(b)&&b.call(this,"cancel"===a?null:d)})},alert:function(a){ThemifyBuilderCommon.LiteLightbox.confirm(a,null,{buttons:{yes:{label:"OK"}}})}},templateCache:{templates:[],get:function(a){this.templates[a]===l&&(this.templates[a]=h.getElementById(a).innerHTML);return this.templates[a]}}}})(jQuery,window,document);
