String.prototype.xsplit=function(c){if("a~b".split(/(~)/).length===3){return this.split(c)}if(!c.global){c=new RegExp(c.source,"g"+(c.ignoreCase?"i":""))}var d=0,b=[];var a;while((a=c.exec(this))!==null){b.push(this.slice(d,a.index));if(a.length>1){b.push(a[1])}d=c.lastIndex}if(d<this.length){b.push(this.slice(d))}if(d===this.length){b.push("")}return b};var wpm_translator={string_to_ml_array:function(n){if(Object.prototype.toString.call(n)!=="[object String]"){return n}var m=/(<!--:[a-z-]+-->|<!--:-->|\[:[a-z-]+\]|\[:\]|\{:[a-z-]+\}|\{:\})/gi;var a=n.xsplit(m);if(typeof a!=="object"||!Object.keys(a).length){return n}if(Object.keys(a).length===1){return a[0]}var h={},d=wpm_translator_params.languages;d.forEach(function(b){h[b]=""});var f=/<!--:([a-z-]+)-->/gi;var k=/\[:([a-z-]+)\]/gi;var e=/\{:([a-z-]+)\}/gi;var c=false;var j;for(var g=0;g<a.length;++g){var l=a[g];if(!l.length){continue}j=f.exec(l);f.lastIndex=0;if(j!==null){c=j[1];continue}j=k.exec(l);k.lastIndex=0;if(j!==null){c=j[1];continue}j=e.exec(l);e.lastIndex=0;if(j!==null){c=j[1];continue}if(l==="<!--:-->"||l==="[:]"||l==="{:}"){c=false;continue}if(c){if(typeof(h[c])!=="undefined"){h[c]+=l}c=false}}return h},translate_string:function(b,d){var a=wpm_translator.string_to_ml_array(b);if(typeof a!=="object"||!Object.keys(a).length){return b}var c=wpm_translator_params.languages;if(d){if(typeof(c[d])!=="undefined"){return a[d]}else{return""}}d=wpm_translator_params.language;if(!a[d].length&&wpm_translator_params.show_untranslated_strings==="yes"){return a[wpm_translator_params.default_language]}return a[d]}};